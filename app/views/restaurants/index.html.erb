<% @restaurants.each do |restaurant| %>
  <h3><%= restaurant.name %></h3>
  <p><em><%= restaurant.category.capitalize %></em> - <%= restaurant.address %></p>

  <% average_rating = restaurant.reviews.reduce(0){|sum, r| sum + r.rating} / restaurant.reviews.length.to_f %>
  <% 1.upto(5) do |i| %>
    <% if i <= average_rating %>
      <i class="fa fa-star" aria-hidden="true"></i>
    <% elsif (i-1..i).include? average_rating  %>
      <i class="fa fa-star-half-o" aria-hidden="true"></i>
    <% else %>
      <i class="fa fa-star-o" aria-hidden="true"></i>
   <% end %>
  <% end %>

  <p>(<%= restaurant.reviews.length %> reviews)</p>


  <%= link_to "Details", restaurant_path(restaurant)%>
  <%= link_to "Reviews", restaurant_reviews_path(restaurant)%>
  <hr>
<% end %>

<%= link_to "Add a new restaurant", new_restaurant_path, class: "btn btn-primary", style: "text-align: center"%>



